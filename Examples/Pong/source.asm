CALL $LOAD_GRAPHICS
# Player And Enemy Scores
SETM 13 0
SETM 14 0
CALL $READY

$LOOP
CALL $PLAYER_CONTROL
CALL $ENEMY_CONTROL
CALL $MOVE_BALL
CALL $DRAW
JUMP $LOOP

$DRAW
SYSC 0x0E0
CALL $DRAW_PADDLE_PLAYER
CALL $DRAW_PADDLE_ENEMY
CALL $DRAW_BALL
CALL $DRAW_SCORE
SYSC 0x0EE

$PLAYER_CONTROL
# Y Position is increased by 1 if Down is pressed, Decreased by 1 if Up is pressed
KEYU 6
RGOP 1 8 SUB
KEYU 7
RGOP 1 8 ADD
JEQM 1 0
SETM 1 1
JEQM 1 20
SETM 1 19
SYSC 0x0EE

$ENEMY_CONTROL
SETI 1048
DUMP 0x2
SETM 2 6
RGOP 1 3 ASSIGN
RGOP 1 2 ADD
RGOP 1 5 SUB
JNEM 0xF 1
RGOP 3 8 ADD
JNEM 0xF 0
RGOP 3 8 SUB
JEQM 3 0
SETM 3 1
JEQM 3 20
SETM 3 19
SETI 1048
LOAD 0x2
SYSC 0x0EE

$READY
# Sets the Player's position
SETM 0 1
SETM 1 10
# Sets the Enemy's Position
SETM 2 60
SETM 3 10
# Sets the Ball's Position
SETM 4 30
SETM 5 12
# Sets the Player's controls ( 6 - UP, 7 - DOWN, 8 - Velocity )
SETM 6 5
SETM 7 8
SETM 8 1
# Sets the Ball's Starting Velocity ( 9 - X direction, 10 - Y direction, 11 - Speed, Direction of 0 = Negative, Direction of 1 = Positive )
RAND 9 1
RAND 10 1
SETM 11 1
SETM 12 30
SYSC 0x0EE

$MOVE_BALL
CALL $CHECK_BALL_COLLISIONS
JNEM 9 0
RGOP 4 11 SUB
JNEM 9 1
RGOP 4 11 ADD
JNEM 10 0
RGOP 5 11 SUB
JNEM 10 1
RGOP 5 11 ADD
JNEM 9 0
ASET 12
JNEM 9 1
ASET 12
JNEM 10 0
ASET 12
JNEM 10 1
ASET 12
SYSC 0x0EE

$PLAYER_LOSE
ADDM 13 1
CALL $READY
SYSC 0x0EE

$PLAYER_WIN
ADDM 14 1
CALL $READY
SYSC 0x0EE

$CHECK_BALL_COLLISIONS
# Checks for Collisions Against Screen Edges
JEQM 4 0
CALL $PLAYER_WIN
JEQM 4 60
CALL $PLAYER_LOSE
JEQM 5 0
SETM 10 0
JEQM 5 28
SETM 10 1
SYSC 0x0EE

$LOAD_GRAPHICS
# Load Paddle Graphics
SETM 0 0b11000000
SETM 1 0b11000000
SETM 2 0b11000000
SETM 3 0b11000000
SETM 4 0b11000000
SETM 5 0b11000000
SETM 6 0b11000000
SETM 7 0b11000000
SETM 8 0b11000000
SETM 9 0b11000000
SETM 10 0b11000000
SETM 11 0b11000000
SETM 12 0b11000000
SETI 1024
DUMP 12
# Load Ball Graphics
SETM 0 0b01100000
SETM 1 0b11110000
SETM 2 0b11110000
SETM 3 0b01100000
SETI 1036
DUMP 3
SYSC 0x0EE

$DRAW_PADDLE_PLAYER
SETI 1024
DRAW 0 1 12
SYSC 0x0EE

$DRAW_PADDLE_ENEMY
SETI 1024
DRAW 2 3 12
SYSC 0x0EE

$DRAW_BALL
SETM 15 1
SETI 1036
DRAW 4 5 4
JEQM 0xF 1
RGOP 9 15 NEGATE
SYSC 0x0EE

$DRAW_SCORE
SETI 1044
DUMP 0x1
SETM 0 0
SETM 1 56
FONT 13
DRAW 0 0 5
FONT 14
DRAW 1 0 5
SETI 1044
LOAD 0x1
SYSC 0x0EE
